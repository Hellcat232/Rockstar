{"version":3,"file":"main-c1ca576d.js","sources":["../../src/js/books-api.js","../../src/js/render-functions.js","../../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function booksCategory() {\n  const BASE_URL = 'https://books-backend.p.goit.global/books/';\n  const END_POINT = 'category-list';\n  const url = BASE_URL + END_POINT;\n\n  const res = await axios.get(url);\n  return res.data;\n}\n\nexport async function topBooks() {\n  const BASE_URL = 'https://books-backend.p.goit.global/books/';\n  const END_POINT = 'top-books';\n  const url = BASE_URL + END_POINT;\n\n  const res = await axios.get(url);\n  return res.data;\n}\n\nexport async function booksByCategory(category) {\n  const BASE_URL = `https://books-backend.p.goit.global/books/`;\n  const END_POINT = `category?category=${category}`;\n  const url = BASE_URL + END_POINT;\n\n  const res = await axios.get(url);\n  return res.data;\n}\n\nexport async function booksID() {\n  const BASE_URL = `https://books-backend.p.goit.global/books/`;\n  const END_POINT = `bookId`;\n  const url = BASE_URL + END_POINT;\n\n  const res = await axios.get(url);\n  return res.data;\n}\n","import { refs } from '../main';\n\nexport function categoriesTemplate(data) {\n  return data\n    .map(book => {\n      return `<li class=\"sidebar-categories-item\"><a class=\"sidebar-category-link\">\n   ${book.list_name}\n   </a>\n  </li>`;\n    })\n    .join('\\n');\n}\n\nexport function categoriesRender(data) {\n  const markup = categoriesTemplate(data);\n  refs.categories.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function topBooksCategoriesTemplate(data) {\n  return data\n    .map(({ list_name, books }) => {\n      let booksTemplate;\n\n      if (window.innerWidth >= 1440) {\n        booksTemplate = topBooksTemplate(books, list_name);\n      } else if (window.innerWidth >= 768) {\n        booksTemplate = topBooksTemplate(books.slice(0, 3), list_name);\n      } else {\n        booksTemplate = topBooksTemplate(books.slice(0, 1), list_name);\n      }\n\n      return `\n       \n      <div class=\"best-books-category\">\n         \n          <p class=\"best-books-subtitle\">${list_name}</p>\n          <ul class=\"best-books-list\">\n            <li class=\"best-books-item\">${booksTemplate}</li>\n          </ul>\n          <div class=\"btn-see-more-wrap\">\n          <button class=\"btn-see-more\" type=\"button\" data-cat=\"${list_name}\">SEE MORE</button>\n        </div>\n          </div>\n      `;\n    })\n    .join('\\n');\n}\n\nexport function topBooksCategoriesRender(data) {\n  const markup = topBooksCategoriesTemplate(data);\n  refs.bestBooks.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function topBooksTemplate(data, filter) {\n  return data\n    .filter(({ list_name }) => list_name === filter)\n    .map(\n      ({ author, list_name, book_image, title, _id }) => `\n    <div class=\"best-books-wrap\" >\n      <div class=\"best-books-content\"  id=\"${_id}\">\n      <img class=\"best-books-image\" src=\"${book_image}\" alt=\"book\" loading=\"lazy\"/>\n      <p class=\"best-books-overlay-text\">quick view</p>\n    </div>\n    <h3 class=\"best-books-heading\">${title}</h3>\n    <p class=\"best-books-text\">${author}</p>\n    </div>\n  `\n    )\n    .join('\\n');\n}\n\nexport function clickAddClass(e) {\n  const target = e.target.closest('li');\n  if (!target || target === e.currentTarget) return;\n\n  refs.categoriesItems.forEach(elem => elem.classList.remove('sidebar-active'));\n  target.classList.add('sidebar-active');\n}\n\nexport function catLink(e) {\n  const categoryLink = e.target.closest('li').textContent.trim();\n  return `${categoryLink}`;\n}\n\nexport function catByBtn(e) {\n  if (e.target.classList.contains('btn-see-more')) {\n    const catByBtn = e.target.dataset.cat.trim();\n    return catByBtn;\n  }\n}\n\nexport function booksByCatTemplate(data) {\n  return data\n    .map(\n      ({ author, list_name, book_image, title, _id }) => `\n\n  <div class=\"hardcover-wrap\">\n            <ul class=\"hardcover-list\">\n                <li class=\"hardcover-item\" id=\"${_id}\">\n                    <img class=\"hardcover-img\" src=\"${book_image}\" alt=\"card\">\n                    <h3 class=\"hardcover-subtitle\">${title}</h3>\n                       <p class=\"hardcover-descr\">${author}</p>\n                </li>\n                </ul>\n                </div>`\n    )\n    .join('\\n');\n}\n\nexport function booksByCatRender(data) {\n  const markup = booksByCatTemplate(data);\n  refs.bestBooks.innerHTML = markup;\n}\n\nexport function addCategoryTitle(category) {\n  const titleWords = category.split(' ');\n  const lastWord = titleWords.slice(-1);\n  const firstWords = titleWords.slice(0, -1);\n  const title = `<h1 class=\"best-books-title\">${firstWords.join(\n    ' '\n  )} <span class=\"best-books-title-colour\">${lastWord.join(' ')}</span></h1>`;\n  refs.categoryTitle.innerHTML = title;\n}\n","import {\n  booksCategory,\n  topBooks,\n  booksByCategory,\n  booksID,\n} from './js/books-api';\nimport {\n  categoriesRender,\n  topBooksCategoriesRender,\n  clickAddClass,\n  catLink,\n  booksByCatRender,\n  catByBtn,\n  addCategoryTitle,\n} from './js/render-functions';\n\nexport const refs = {\n  bestBooks: document.querySelector('.best-books-category'),\n  categories: document.querySelector('.sidebar-categories'),\n  allCategories: document.querySelector('.sidebar-all-categories'),\n  categoryTitle: document.querySelector('.best-books-title'),\n  modalWindow: document.querySelector('modal-window'),\n  seeMoreBtn: document.querySelector('.best-books-category'),\n  headerBtn: document.querySelector('.header-burger-btn'),\n  headerIcon: document.querySelector('.header-burger-icon'),\n  headerMenu: document.querySelector('.header-modal-menu'),\n  burgerSvg: document.querySelector('#burger-svg'),\n};\n\nasync function onPageLoad() {\n  const data = await booksCategory();\n  const topBooksResponse = await topBooks();\n  categoriesRender(data);\n  topBooksCategoriesRender(topBooksResponse);\n\n  refs.oneCategory = document.querySelector('.sidebar-category-link');\n  refs.categoriesItems = document.querySelectorAll('.sidebar-categories-item');\n  refs.allCategories.classList.add('sidebar-active');\n  refs.categories.addEventListener('click', onCategoriesClick);\n  refs.seeMoreBtn.addEventListener('click', onSeeMoreClick);\n}\n\nonPageLoad();\n\nasync function onSeeMoreClick(e) {\n  const booksByCat = await booksByCategory(catByBtn(e));\n  booksByCatRender(booksByCat);\n  addCategoryTitle(catByBtn(e));\n}\n\nasync function onCategoriesClick(e) {\n  if (catLink(e) === 'All categories') onPageLoad();\n  const booksByCat = await booksByCategory(catLink(e));\n  booksByCatRender(booksByCat);\n  addCategoryTitle(catLink(e));\n  clickAddClass(e);\n}\n\nrefs.headerBtn.addEventListener('click', () => {\n  refs.headerMenu.classList.toggle('hidden');\n  const check =\n    refs.burgerSvg.getAttribute('href') ==\n    '../img/header/symbol-defs.svg#icon-burger';\n  if (check) {\n    refs.burgerSvg.setAttribute(\n      'href',\n      '../img/header/symbol-defs.svg#icon-close'\n    );\n    refs.headerIcon.setAttribute('width', '18');\n    refs.headerIcon.setAttribute('height', '18');\n    refs.headerMenu.style.padding = '5px';\n  } else {\n    refs.burgerSvg.setAttribute(\n      'href',\n      '../img/header/symbol-defs.svg#icon-burger'\n    );\n    refs.headerIcon.setAttribute('width', '28');\n    refs.headerIcon.setAttribute('height', '28');\n  }\n});\n"],"names":["booksCategory","url","axios","topBooks","booksByCategory","category","BASE_URL","END_POINT","categoriesTemplate","data","book","categoriesRender","markup","refs","topBooksCategoriesTemplate","list_name","books","booksTemplate","topBooksTemplate","topBooksCategoriesRender","filter","author","book_image","title","_id","clickAddClass","target","elem","catLink","catByBtn","booksByCatTemplate","booksByCatRender","addCategoryTitle","titleWords","lastWord","onPageLoad","topBooksResponse","onCategoriesClick","onSeeMoreClick","booksByCat"],"mappings":"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"}