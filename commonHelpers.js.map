{"version":3,"file":"commonHelpers.js","sources":["../src/js/books-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function booksCategory() {\n  const BASE_URL = 'https://books-backend.p.goit.global/books/';\n  const END_POINT = 'category-list';\n  const url = BASE_URL + END_POINT;\n\n  const res = await axios.get(url);\n  return res.data;\n}\n\nexport async function topBooks() {\n  const BASE_URL = 'https://books-backend.p.goit.global/books/';\n  const END_POINT = 'top-books';\n  const url = BASE_URL + END_POINT;\n\n  const res = await axios.get(url);\n  return res.data;\n}\n\nexport async function booksByCategory(category) {\n  const BASE_URL = 'https://books-backend.p.goit.global/books/';\n  const END_POINT = `category?category=${category}`;\n  const url = BASE_URL + END_POINT;\n\n  const res = await axios.get(url);\n  return res.data;\n}\n","import { refs } from '../main';\n\nexport function categoriesTemplate(data) {\n  return data\n    .map(book => {\n      return `<li class=\"sidebar-categories-item\"><a class=\"sidebar-category-link\">\n   ${book.list_name}\n   </a>\n  </li>`;\n    })\n    .join('\\n');\n}\n\nexport function categoriesRender(data) {\n  const markup = categoriesTemplate(data);\n  refs.categories.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function topBooksCategoriesTemplate(data) {\n  return data\n    .map(({ list_name, books }) => {\n      let booksTemplate;\n\n      if (window.innerWidth >= 1440) {\n        booksTemplate = topBooksTemplate(books, list_name);\n      } else if (window.innerWidth >= 768) {\n        booksTemplate = topBooksTemplate(books.slice(0, 3), list_name);\n      } else {\n        booksTemplate = topBooksTemplate(books.slice(0, 1), list_name);\n      }\n\n      return `\n        <div class=\"best-books-category\">\n          <p class=\"best-books-subtitle\">${list_name}</p>\n          <ul class=\"best-books-list\">\n            <li class=\"best-books-item\">${booksTemplate}</li>\n          </ul>\n          <button class=\"btn-see-more\" type=\"button\" data-cat=\"${list_name}\">SEE MORE</button>\n        </div>\n      `;\n    })\n    .join('\\n');\n}\n\nexport function topBooksCategoriesRender(data) {\n  const markup = topBooksCategoriesTemplate(data);\n  refs.bestBooks.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function topBooksTemplate(data, filter) {\n  return data\n    .filter(({ list_name }) => list_name === filter)\n    .map(\n      ({ author, list_name, book_image, title, _id }) => `\n    <div class=\"best-books-content\"  id=\"${_id}\">\n      <img class=\"best-books-image\" src=\"${book_image}\" alt=\"book\" loading=\"lazy\"/>\n      <p class=\"best-books-hidden-text\">quick view</p>\n    </div>\n    <h3 class=\"best-books-heading\">${title}</h3>\n    <p class=\"best-books-text\">${author}</p>\n  `\n    )\n    .join('\\n');\n}\n\nexport function clickAddClass(e) {\n  const target = e.target.closest('li');\n  if (!target || target === e.currentTarget) return;\n\n  refs.categoriesItems.forEach(elem => elem.classList.remove('sidebar-active'));\n  target.classList.add('sidebar-active');\n}\n","import { booksCategory } from './js/books-api';\nimport {\n  categoriesRender,\n  topBooksTemplate,\n  topBooksCategoriesRender,\n  clickAddClass,\n} from './js/render-functions';\nimport { topBooks } from './js/books-api';\n\nexport const refs = {\n  bestBooks: document.querySelector('.best-books-category'),\n  categories: document.querySelector('.sidebar-categories'),\n  allCategories: document.querySelector('.sidebar-all-categories'),\n};\n\nasync function onPageLoad() {\n  const data = await booksCategory();\n  const topBooksResponse = await topBooks();\n  categoriesRender(data);\n  topBooksCategoriesRender(topBooksResponse);\n\n  refs.categoriesItems = document.querySelectorAll('.sidebar-categories-item');\n  refs.allCategories.classList.add('sidebar-active');\n  refs.categories.addEventListener('click', onCategoriesClick);\n}\n\nonPageLoad();\n\nfunction onCategoriesClick(e) {\n  clickAddClass(e);\n}\n"],"names":["booksCategory","url","axios","topBooks","categoriesTemplate","data","book","categoriesRender","markup","refs","topBooksCategoriesTemplate","list_name","books","booksTemplate","topBooksTemplate","topBooksCategoriesRender","filter","author","book_image","title","_id","clickAddClass","e","target","elem","onPageLoad","topBooksResponse","onCategoriesClick"],"mappings":"oGAEO,eAAeA,GAAgB,CAGpC,MAAMC,EAFW,6CACC,gBAIlB,OADY,MAAMC,EAAM,IAAID,CAAG,GACpB,IACb,CAEO,eAAeE,GAAW,CAG/B,MAAMF,EAFW,6CACC,YAIlB,OADY,MAAMC,EAAM,IAAID,CAAG,GACpB,IACb,CChBO,SAASG,EAAmBC,EAAM,CACvC,OAAOA,EACJ,IAAIC,GACI;AAAA,KACRA,EAAK,SAAS;AAAA;AAAA,QAGd,EACA,KAAK;AAAA,CAAI,CACd,CAEO,SAASC,EAAiBF,EAAM,CACrC,MAAMG,EAASJ,EAAmBC,CAAI,EACtCI,EAAK,WAAW,mBAAmB,YAAaD,CAAM,CACxD,CAEO,SAASE,EAA2BL,EAAM,CAC/C,OAAOA,EACJ,IAAI,CAAC,CAAE,UAAAM,EAAW,MAAAC,KAAY,CAC7B,IAAIC,EAEJ,OAAI,OAAO,YAAc,KACvBA,EAAgBC,EAAiBF,EAAOD,CAAS,EACxC,OAAO,YAAc,IAC9BE,EAAgBC,EAAiBF,EAAM,MAAM,EAAG,CAAC,EAAGD,CAAS,EAE7DE,EAAgBC,EAAiBF,EAAM,MAAM,EAAG,CAAC,EAAGD,CAAS,EAGxD;AAAA;AAAA,2CAE8BA,CAAS;AAAA;AAAA,0CAEVE,CAAa;AAAA;AAAA,iEAEUF,CAAS;AAAA;AAAA,OAG1E,CAAK,EACA,KAAK;AAAA,CAAI,CACd,CAEO,SAASI,EAAyBV,EAAM,CAC7C,MAAMG,EAASE,EAA2BL,CAAI,EAC9CI,EAAK,UAAU,mBAAmB,YAAaD,CAAM,CACvD,CAEO,SAASM,EAAiBT,EAAMW,EAAQ,CAC7C,OAAOX,EACJ,OAAO,CAAC,CAAE,UAAAM,KAAgBA,IAAcK,CAAM,EAC9C,IACC,CAAC,CAAE,OAAAC,EAAQ,UAAAN,EAAW,WAAAO,EAAY,MAAAC,EAAO,IAAAC,CAAG,IAAO;AAAA,2CACdA,CAAG;AAAA,2CACHF,CAAU;AAAA;AAAA;AAAA,qCAGhBC,CAAK;AAAA,iCACTF,CAAM;AAAA,GAElC,EACA,KAAK;AAAA,CAAI,CACd,CAEO,SAASI,EAAcC,EAAG,CAC/B,MAAMC,EAASD,EAAE,OAAO,QAAQ,IAAI,EAChC,CAACC,GAAUA,IAAWD,EAAE,gBAE5Bb,EAAK,gBAAgB,QAAQe,GAAQA,EAAK,UAAU,OAAO,gBAAgB,CAAC,EAC5ED,EAAO,UAAU,IAAI,gBAAgB,EACvC,CC9DO,MAAMd,EAAO,CAClB,UAAW,SAAS,cAAc,sBAAsB,EACxD,WAAY,SAAS,cAAc,qBAAqB,EACxD,cAAe,SAAS,cAAc,yBAAyB,CACjE,EAEA,eAAegB,GAAa,CAC1B,MAAMpB,EAAO,MAAML,IACb0B,EAAmB,MAAMvB,IAC/BI,EAAiBF,CAAI,EACrBU,EAAyBW,CAAgB,EAEzCjB,EAAK,gBAAkB,SAAS,iBAAiB,0BAA0B,EAC3EA,EAAK,cAAc,UAAU,IAAI,gBAAgB,EACjDA,EAAK,WAAW,iBAAiB,QAASkB,CAAiB,CAC7D,CAEAF,IAEA,SAASE,EAAkBL,EAAG,CAC5BD,EAAcC,CAAC,CACjB"}